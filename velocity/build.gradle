import net.mcparkour.migle.attributes.Dependency;

plugins {
    id("net.mcparkour.migle.migle-velocity") version "1.1.2"
}

repositories {
    //Velocity
    maven {
        name = "papermc"
        url = uri("https://repo.papermc.io/repository/maven-public/")
    }
}

dependencies {
    // Platform.
    compileOnly("com.velocitypowered:velocity-api:3.2.0-SNAPSHOT")
    annotationProcessor("com.velocitypowered:velocity-api:3.2.0-SNAPSHOT")

    implementation "net.kyori:adventure-text-serializer-gson:4.14.0"

    // Defaults.
    compileOnly(files(FILES))
    annotationProcessor(ANNO)
    compileOnly(COMP_ONLY)

    // Other Plugins
    compileOnly(OTHER_PLUGINS)

    // Streamline API.
    implementation project(path: ':StreamlineCore-API', configuration: 'shadow')
    //    implementation(shadow(files("${rootDir}\\api\\build\\libs\\StreamlineCore-API-${API_VER}.jar")))
}

jar.enabled = false

Dependency lp = new Dependency("luckperms", false)
Dependency geyser = new Dependency("geyser-velocity", true)

migleVelocity {
    id = 'streamlinecore'
    name = 'StreamlineCore'
    version = "${project.version}"
    main = 'net.streamline.base.Streamline'
    description = 'True potential is here. A Proxy and Spigot plugin that opens up endless cross-platform possibilities.'
    authors = ['Quaint', 'RestonedLife']
    url = 'https://github.com/Streamline-Essentials'
    dependencies = [ lp, geyser ]
}