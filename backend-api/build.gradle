//plugins {
//    id 'java'
//    id "com.github.johnrengelman.shadow" version "7.1.1"
//    id "net.kyori.blossom" version "1.3.1"
//}
//apply from: "$rootDir/../dependencies.gradle"

group = 'net.streamline'
project.version = "SLB" + version

repositories {
    jcenter()
    mavenCentral()
    mavenLocal()
    // OpenCollab
    maven { url 'https://repo.opencollab.dev/maven-snapshots/' }
    maven { url 'https://repo.opencollab.dev/maven-releases/'}
    // JitPack
    maven { url 'https://jitpack.io' }
    maven { url 'https://mvnrepository.com/artifact' }
    maven { url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/' }
    maven { url = 'https://oss.sonatype.org/content/repositories/snapshots' }
    maven { url = 'https://oss.sonatype.org/content/repositories/central' }
    maven { url = 'https://repo.extendedclip.com/content/repositories/placeholderapi/' }
}

dependencies {
    // Platform Backend.
    compileOnly 'org.spigotmc:spigot-api:1.19.2-R0.1-SNAPSHOT' // The Spigot API with no shadowing. Requires the OSS repo.

    // Defaults.
    implementation(IMPL)
    shadow(SHAD)
    annotationProcessor(ANNO)
    compileOnly(COMP_ONLY)

    // Other Plugins
    compileOnly(OTHER_PLUGINS)

    // Inventories.
    implementation(shadow("fr.minuskube.inv:smart-invs:1.2.7"))

    // Streamline API.
    compileOnly(project(":StreamlineCore-API"))
    compileOnly 'me.clip:placeholderapi:2.11.2'
}

java {
    sourceCompatibility = JavaVersion.VERSION_16
    targetCompatibility = JavaVersion.VERSION_16
}

blossom {
    replaceToken '${version}', project.version, 'src/main/resources/plugin.yml'
}

jar.enabled = false
shadowJar {
    String finalName = "StreamlineCore-APIB-${project.version}.jar"

    destinationDirectory = file("${rootDir}/backend-api/build/libs")
    archiveClassifier.set('')

    archiveFileName = finalName;
}

artifacts {
    archives shadowJar
}