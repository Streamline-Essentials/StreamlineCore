//plugins {
//    id 'java'
//    id "com.github.johnrengelman.shadow" version "7.1.1"
//    id "net.kyori.blossom" version "1.3.1"
//}
//apply from: "$rootDir/../dependencies.gradle"

group = 'net.streamline'
project.version = "SL" + version

repositories {
    mavenCentral()
    // OpenCollab
    maven { url 'https://repo.opencollab.dev/maven-snapshots/' }
    maven { url 'https://repo.opencollab.dev/maven-releases/'}
    // JitPack
    maven { url 'https://jitpack.io' }
    maven { url 'https://mvnrepository.com/artifact' }
}

dependencies {
    // Defaults.
    implementation(IMPL)
    shadow(SHADOW)
    annotationProcessor(ANNO)
    compileOnly(COMP_ONLY)

    // Other Plugins
    compileOnly(OTHER_PLUGINS)

    // Files.
    implementation(shadow(files(FILES)));
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

blossom {
    replaceToken '${version}', project.version, 'src/main/resources/plugin.yml'
}

jar.enabled = false
shadowJar {
    String finalName = "StreamlineCore-API-${project.version}.jar"

    destinationDirectory = file("${rootDir}/api/build/libs")
    archiveClassifier.set('')

    archiveFileName = finalName;
}

artifacts {
    archives shadowJar
}